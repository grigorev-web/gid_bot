-- Примеры данных для тестирования базы данных city_guide
USE city_guide;

-- Вставка адресов
INSERT INTO addresses (street, house_number, city, region, postal_code, latitude, longitude, is_public_space) VALUES
('ул. Ленина', '15', 'Москва', 'Центральный', '101000', 55.7558, 37.6176, FALSE),
('ул. Тверская', '8', 'Москва', 'Центральный', '125009', 55.7577, 37.6136, FALSE),
('Красная площадь', '1', 'Москва', 'Центральный', '109012', 55.7539, 37.6208, TRUE),
('ул. Арбат', '25', 'Москва', 'Арбат', '119002', 55.7494, 37.5912, FALSE),
('Парк Горького', '9', 'Москва', 'Центральный', '119049', 55.7298, 37.6011, TRUE),
('ул. Новый Арбат', '12', 'Москва', 'Арбат', '119019', 55.7517, 37.5739, FALSE),
('ВДНХ', '119', 'Москва', 'Северо-Восточный', '129223', 55.8298, 37.6322, TRUE),
('ул. Покровка', '3', 'Москва', 'Басманный', '101000', 55.7614, 37.6475, FALSE);

-- Вставка заведений
INSERT INTO establishments (name, description, address_id, phone, website, email) VALUES
('Ресторан "У Пушкина"', 'Элитный ресторан русской кухни в центре города', 1, '+7(495)123-45-67', 'http://pushkin-rest.ru', 'info@pushkin-rest.ru'),
('Бар "Красный"', 'Современный бар с авторскими коктейлями', 2, '+7(495)234-56-78', 'http://redbar.ru', 'hello@redbar.ru'),
('Ночной клуб "Электро"', 'Ночной клуб с электронной музыкой', 3, '+7(495)345-67-89', 'http://electro-club.ru', 'club@electro-club.ru'),
('Кинотеатр "Космос"', 'Современный кинотеатр с 8 залами', 4, '+7(495)456-78-90', 'http://cosmos-cinema.ru', 'info@cosmos-cinema.ru'),
('Театр "Современник"', 'Драматический театр', 5, '+7(495)567-89-01', 'http://sovremennik.ru', 'theatre@sovremennik.ru'),
('Ресторан "Токио"', 'Ресторан японской кухни', 6, '+7(495)678-90-12', 'http://tokyo-rest.ru', 'info@tokyo-rest.ru'),
('Спорт-бар "Гол"', 'Спортивный бар для любителей футбола', 7, '+7(495)789-01-23', 'http://goal-bar.ru', 'info@goal-bar.ru'),
('Кафе "Уют"', 'Уютное кафе с домашней кухней', 8, '+7(495)890-12-34', 'http://uyut-cafe.ru', 'cafe@uyut-cafe.ru');

-- Вставка часов работы
INSERT INTO working_hours (establishment_id, day_of_week, open_time, close_time, is_24h, is_closed) VALUES
(1, 1, '12:00:00', '23:00:00', FALSE, FALSE), -- Понедельник
(1, 2, '12:00:00', '23:00:00', FALSE, FALSE), -- Вторник
(1, 3, '12:00:00', '23:00:00', FALSE, FALSE), -- Среда
(1, 4, '12:00:00', '23:00:00', FALSE, FALSE), -- Четверг
(1, 5, '12:00:00', '00:00:00', FALSE, FALSE), -- Пятница
(1, 6, '12:00:00', '00:00:00', FALSE, FALSE), -- Суббота
(1, 7, '12:00:00', '23:00:00', FALSE, FALSE), -- Воскресенье

(2, 1, '18:00:00', '02:00:00', FALSE, FALSE),
(2, 2, '18:00:00', '02:00:00', FALSE, FALSE),
(2, 3, '18:00:00', '02:00:00', FALSE, FALSE),
(2, 4, '18:00:00', '02:00:00', FALSE, FALSE),
(2, 5, '18:00:00', '03:00:00', FALSE, FALSE),
(2, 6, '18:00:00', '03:00:00', FALSE, FALSE),
(2, 7, '18:00:00', '02:00:00', FALSE, FALSE),

(3, 1, '22:00:00', '06:00:00', FALSE, FALSE),
(3, 2, '22:00:00', '06:00:00', FALSE, FALSE),
(3, 3, '22:00:00', '06:00:00', FALSE, FALSE),
(3, 4, '22:00:00', '06:00:00', FALSE, FALSE),
(3, 5, '22:00:00', '07:00:00', FALSE, FALSE),
(3, 6, '22:00:00', '07:00:00', FALSE, FALSE),
(3, 7, '22:00:00', '06:00:00', FALSE, FALSE),

(4, 1, '10:00:00', '23:00:00', FALSE, FALSE),
(4, 2, '10:00:00', '23:00:00', FALSE, FALSE),
(4, 3, '10:00:00', '23:00:00', FALSE, FALSE),
(4, 4, '10:00:00', '23:00:00', FALSE, FALSE),
(4, 5, '10:00:00', '00:00:00', FALSE, FALSE),
(4, 6, '10:00:00', '00:00:00', FALSE, FALSE),
(4, 7, '10:00:00', '23:00:00', FALSE, FALSE),

(5, 1, '10:00:00', '22:00:00', FALSE, FALSE),
(5, 2, '10:00:00', '22:00:00', FALSE, FALSE),
(5, 3, '10:00:00', '22:00:00', FALSE, FALSE),
(5, 4, '10:00:00', '22:00:00', FALSE, FALSE),
(5, 5, '10:00:00', '22:00:00', FALSE, FALSE),
(5, 6, '10:00:00', '22:00:00', FALSE, FALSE),
(5, 7, '10:00:00', '22:00:00', FALSE, FALSE);

-- Вставка связи заведений с категориями
INSERT INTO establishment_categories (establishment_id, category_id, is_primary) VALUES
(1, 1, TRUE),   -- Ресторан "У Пушкина" - основная категория "Рестораны"
(1, 12, FALSE), -- Ресторан "У Пушкина" - категория "Русская кухня"
(1, 15, FALSE), -- Ресторан "У Пушкина" - категория "Лучшие рестораны"
(2, 2, TRUE),   -- Бар "Красный" - основная категория "Бары"
(3, 3, TRUE),   -- Ночной клуб "Электро" - основная категория "Ночные клубы"
(4, 4, TRUE),   -- Кинотеатр "Космос" - основная категория "Кинотеатры"
(5, 5, TRUE),   -- Театр "Современник" - основная категория "Театры"
(6, 1, TRUE),   -- Ресторан "Токио" - основная категория "Рестораны"
(6, 11, FALSE), -- Ресторан "Токио" - категория "Азиатская кухня"
(6, 18, FALSE), -- Ресторан "Токио" - категория "Японская кухня"
(7, 2, TRUE),   -- Спорт-бар "Гол" - основная категория "Бары"
(7, 8, FALSE),  -- Спорт-бар "Гол" - категория "Спорт"
(8, 1, TRUE);   -- Кафе "Уют" - основная категория "Рестораны"

-- Вставка мероприятий
INSERT INTO events (name, description, event_type, establishment_id, address_id, start_date, end_date, price, max_participants) VALUES
('Концерт группы "Любэ"', 'Концерт легендарной группы в театре', 'concert', 5, 5, '2024-02-15 19:00:00', '2024-02-15 22:00:00', 2500.00, 500),
('DJ вечеринка', 'Вечеринка с лучшими диджеями города', 'party', 3, 3, '2024-02-16 23:00:00', '2024-02-17 06:00:00', 1500.00, 200),
('Премьера фильма "Матрица 5"', 'Премьерный показ нового фильма', 'cinema', 4, 4, '2024-02-20 20:00:00', '2024-02-20 22:30:00', 800.00, 150),
('Городской фестиваль еды', 'Фестиваль уличной еды на Красной площади', 'festival', NULL, 3, '2024-02-25 12:00:00', '2024-02-25 20:00:00', 0.00, 1000),
('Вечер поэзии', 'Вечер чтения стихов в кафе', 'other', 8, 8, '2024-02-18 19:00:00', '2024-02-18 21:00:00', 300.00, 50);

-- Вставка связи мероприятий с категориями
INSERT INTO event_categories (event_id, category_id, is_primary) VALUES
(1, 26, TRUE),  -- Концерт "Любэ" - основная категория "Концерты"
(1, 29, FALSE), -- Концерт "Любэ" - категория "Поп-концерты"
(2, 27, TRUE),  -- DJ вечеринка - основная категория "Вечеринки"
(3, 4, FALSE),  -- Премьера фильма - категория "Кинотеатры"
(4, 28, TRUE),  -- Фестиваль еды - основная категория "Фестивали"
(5, 26, FALSE); -- Вечер поэзии - категория "Концерты"

-- Вставка акций и скидок
INSERT INTO promotions (name, description, promotion_type, establishment_id, discount_percent, discount_amount, min_order_amount, start_date, end_date, valid_days, valid_hours, is_weekday_only, is_weekend_only) VALUES
('Скидка 20% на все меню', 'Скидка на все блюда в будние дни', 'discount', 1, 20.00, NULL, 1000.00, '2024-02-01', '2024-02-29', '[1,2,3,4,5]', '{"start": "12:00", "end": "18:00"}', TRUE, FALSE),
('Happy Hours в баре', 'Скидка 30% на все напитки с 18:00 до 20:00', 'happy_hours', 2, 30.00, NULL, NULL, '2024-02-01', '2024-02-29', '[1,2,3,4,5,6,7]', '{"start": "18:00", "end": "20:00"}', FALSE, FALSE),
('Скидка на кино в будни', 'Скидка 25% на билеты в будние дни', 'discount', 4, 25.00, NULL, NULL, '2024-02-01', '2024-02-29', '[1,2,3,4,5]', '{"start": "10:00", "end": "18:00"}', TRUE, FALSE),
('Городская акция "День без машин"', 'Скидки в ресторанах для велосипедистов', 'special_offer', NULL, 15.00, NULL, NULL, '2024-02-22', '2024-02-22', '[6]', '{"start": "00:00", "end": "23:59"}', FALSE, TRUE);

-- Вставка связи акций с категориями
INSERT INTO promotion_categories (promotion_id, category_id, is_primary) VALUES
(1, 35, TRUE),  -- Скидка 20% - основная категория "Скидки"
(1, 38, FALSE), -- Скидка 20% - категория "Скидки на еду"
(2, 36, TRUE),  -- Happy Hours - основная категория "Happy Hours"
(3, 35, TRUE),  -- Скидка на кино - основная категория "Скидки"
(4, 35, TRUE);  -- Городская акция - основная категория "Скидки"

-- Вставка достопримечательностей
INSERT INTO attractions (name, description, attraction_type, address_id, best_visit_time, is_free, entrance_fee) VALUES
('Красная площадь', 'Главная площадь Москвы, исторический центр', 'landmark', 3, 'Утро или вечер для фотографий', TRUE, NULL),
('Парк Горького', 'Центральный парк культуры и отдыха', 'park', 5, 'День для прогулок, вечер для мероприятий', TRUE, NULL),
('ВДНХ', 'Выставка достижений народного хозяйства', 'historical_site', 7, 'День для осмотра павильонов', TRUE, NULL),
('Храм Василия Блаженного', 'Православный храм на Красной площади', 'monument', 3, 'День для посещения', FALSE, 500.00);

-- Вставка связи достопримечательностей с категориями
INSERT INTO attraction_categories (attraction_id, category_id, is_primary) VALUES
(1, 45, TRUE),  -- Красная площадь - основная категория "Исторические места"
(1, 48, FALSE), -- Красная площадь - категория "Архитектура"
(2, 46, TRUE),  -- Парк Горького - основная категория "Парки"
(3, 45, TRUE),  -- ВДНХ - основная категория "Исторические места"
(4, 45, TRUE),  -- Храм Василия Блаженного - основная категория "Исторические места"
(4, 48, FALSE); -- Храм Василия Блаженного - категория "Архитектура"

-- Вставка изображений
INSERT INTO images (entity_type, entity_id, image_url, alt_text, is_primary, sort_order) VALUES
('establishment', 1, 'https://example.com/pushkin-rest-1.jpg', 'Фасад ресторана У Пушкина', TRUE, 1),
('establishment', 1, 'https://example.com/pushkin-rest-2.jpg', 'Интерьер ресторана', FALSE, 2),
('establishment', 2, 'https://example.com/redbar-1.jpg', 'Бар Красный', TRUE, 1),
('event', 1, 'https://example.com/lube-concert.jpg', 'Концерт группы Любэ', TRUE, 1),
('attraction', 1, 'https://example.com/red-square.jpg', 'Красная площадь', TRUE, 1);

-- Вставка отзывов (предполагается, что user_id = 1 существует)
INSERT INTO reviews (user_id, entity_type, entity_id, rating, comment) VALUES
(1, 'establishment', 1, 5, 'Отличный ресторан! Вкусная еда и приятная атмосфера'),
(1, 'establishment', 2, 4, 'Хороший бар, интересные коктейли'),
(1, 'event', 1, 5, 'Потрясающий концерт! Любэ как всегда на высоте'),
(1, 'attraction', 1, 5, 'Обязательно к посещению! Сердце Москвы');

-- Вывод статистики по созданным данным
SELECT 'Данные успешно добавлены!' as message;
SELECT COUNT(*) as total_addresses FROM addresses;
SELECT COUNT(*) as total_establishments FROM establishments;
SELECT COUNT(*) as total_events FROM events;
SELECT COUNT(*) as total_promotions FROM promotions;
SELECT COUNT(*) as total_attractions FROM attractions;
SELECT COUNT(*) as total_images FROM images;
SELECT COUNT(*) as total_reviews FROM reviews; 